# Implementation Plan - Phase 2: AI Analysis with Gemini

## Goal Description
Integrate Google's Gemini API to analyze product images. The AI will perform OCR to extract ingredients, analyze them for toxicity, assign a health score, 

## User Review Required
> [!IMPORTANT]
> **Gemini API Key**: I need a valid Gemini API Key to make requests. Please provide this in the `.env` file or chat.

## Proposed Changes

### Dependencies
#### [NEW] Package Installation
- Install `@google/generative-ai` for accessing Gemini.

### AI Service
#### [NEW] [lib/gemini.ts](file:///c:/Users/India/Desktop/detoxai/lib/gemini.ts)
- Initialize Gemini client.
- Create `analyzeImage(base64Image: string)` function.
- Define the prompt to return structured JSON:
  ```json
  {
    "score": number,
    "status": "Clean" | "Toxic" | "Moderate",
    "ingredients": [
      { "name": "string", "status": "safe" | "toxic", "description": "string" }
    ],
    "alternatives": [
      { "name": "string", "reason": "string" }
    ]
  }
  ```

### Frontend Integration
#### [MODIFY] [app/(tabs)/scan.tsx](file:///c:/Users/India/Desktop/detoxai/app/(tabs)/scan.tsx)
- Convert captured image to Base64.
- Call `analyzeImage` service.
- Pass result data to the Result Screen (via params or global context).

#### [MODIFY] [app/result/[id].tsx](file:///c:/Users/India/Desktop/detoxai/app/result/[id].tsx)
- Update to read data from navigation parameters instead of hardcoded mock data.

## Verification Plan
### Manual Verification
- **Scan**: Take a picture of a product (shampoo/snack).
- **Verify**: Ensure the app waits for analysis and displays real results generated by Gemini.
